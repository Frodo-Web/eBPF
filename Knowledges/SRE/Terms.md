# SRE Terms
## Core Principes of SRE
SRE - это эксплуатация систем, приложений с разработкой их наблюдаемости анализом производительности и работой над ошибками. Разработка принципов и планов по улучшению пользовательского опыта в плане отзывчивости и безошибочной работы системы.
- Automation : Automate repetitive tasks (e.g., deployments, scaling, incident responses).
- Monitoring & Observability : Track system health and performance.
- Service Level Objectives (SLOs), Service Level Indicators (SLIs), and Service Level Agreements (SLAs) : Define acceptable reliability targets.
- Error Budgets : Allow for innovation while maintaining reliability.
- Incident Management & Postmortems : Learn from failures and improve systems.
- Release Engineering : Safe and efficient deployment practices (canary releases, blue/green deploys).
- Capacity Planning : Ensure systems scale properly under load.
- Collaboration between Dev & Ops : Break down silos; promote shared ownership of services.
## SLI, SLO, SLA, Error Budget
### Service Level Indicator (SLI)
```
Service Level Indicator (SLI) – это количественная оценка работы сервиса, как правило, связанная с удовлетворенностью пользователей производительностью приложения или сервиса за заданный период времени (месяц, квартал, год).
А если говорить конкретнее – это индикатор пользовательского опыта, который отслеживает одну из многочисленных возможных метрик (рассмотрим их ниже) и, чаще всего, представляется в процентном эквиваленте, где 100 % - означает отличный пользовательский опыт, а 0% - ужасный.
```
### Service Level Objectives (SLO)
```
Service Level Objectives (SLO) – это желаемое, целевое значение нашего SLI или группы SLI.
При установке SLO необходимо указывать реально достижимое значение для каждого конкретного SLI.
```
### Service Level Agreement (SLA)
```
Также важно понимать, что SLO – это наш внутренний показатель качества работы сервиса и/или приложения, в отличие от Service Level Agreement (SLA), который обычно устанавливается бизнесом как внешнее обязательство по доступности сервиса перед клиентами компании.

Если компания предоставляет SLA клиентам, обычно при прописывании SLO берутся в расчет установленные показатели SLA. Так как в случае не достижения SLO это напрямую отразиться на SLA, что приведет к определенным последствиям для бизнеса в лице нарушения договорных обязательств перед клиентами или даже штрафам.
```
### Error Budget
```
В концепции SLI и SLO присутствует индикатор Error Budget или, как его иногда называют, «право на ошибку». Error Budget – это степень невыполнения наших SLO. Например, если наш SLO учитывает доступность, то error budget – это максимальное время, в течение которого наша система может быть недоступной без последствий для нас и нашей команды.

Использование данного показателя упрощает командам процесс контроля времени недоступности приложений/сервисов посредством ввода наглядного индикатора. Устанавливая Error Budget, мы ставим для себя цель – не выйти за рамки разрешенного нам самим downtime.
```
Например, если в качестве SLI для одного из наших приложений у нас указана метрика Availability, а в качестве SLO для этого SLI мы указали значение 99,95% в месяц, то наш Error Budget за месяц (30 дней) составит 21 минуту 54 секунды.

Agreed SLA level: 
99.95 % 

SLA level of 99.95 % uptime/availability results in the following periods of allowed downtime/unavailability:

- Daily: 43s
- Weekly: 5m 2.4s
- Monthly: 21m 55s
- Quarterly: 1h 5m 45s
- Yearly: 4h 22m 58s
## Шаги имплементации SLO
1. Определяются сервисы критичные с точки зрения пользовательского опыта

Если не уверены, можно начать с критичных транзакций и путей транзакций для бизнеса, пример:
- добавление товара в корзину
- пути транзакции оплаты
- транзакции регистрации
- транзакции входа в ЛК

Например, пользователи жалуются на долгий процесс чекаута, тогда нам нужно определить транзакции или сервисы, которые участвуют в процессе подтверждения заказа.

2. Для выбранных сервисов и их операций определяем набор метрик, который войдут в SLI

Часто это метрики связанные с пользовательским опытом, то есть время отклика, доступность, производительность, время исполнения транзакции, процент ошибок.

3. Определяем текущеее распределение значений выбранных метрик

Например, мы видим, что у транзакции чекаута время исполнения по 90-му перцентилю равняется 110 мс за последние две недели.

4. Определяем SLO, учитываем нормальное поведение выбранных метрик и устанавливаем Error Budget.

Использовать «в лоб» текущие значения производительности как целевые - не совсем корректная практика, ведь SLO – это цель, к которой нужно стремиться, и она может и должна формироваться не только исходя из технических критериев и текущей ситуации. 

Но на практике проще оттолкнуться от измеренного значения и подкорректировать целевое, с учетом тех действий, которые позволят достичь этой цели.

Например, можно установить порог 110 мс по 90-му перцентилю и SLO в 95%. Это будет означать, что мы допускаем 5% времени, в которое время исполнения транзакции по 90-му перцентилю будет выше 110 мс.

5. Прописываем процедуру действий на случай истощения Error Budget

Важно заранее продумать, что мы будем делать в случае истощения Error Budget. В процедуру реагирования можно включить следующие действия:

Оповещение при превышении Error Budget

Повышение приоритета для команд разработки и DevOps у работ по восстановлению доступности сервиса перед работами по выкатке новых фич на определенный период времени.

Lessons learned, post mortem и другие документы – фиксация причин превышения Error Budget в каждом конкретном случае в базу знаний и работа над ошибками.

6. Отслеживаем выполнение установленных нами SLO для соответствующих SLIs во времени.

7. Оцениваем результаты внедрения SLI SLO, как и с любым процессом, следующим логике Plan-Do-Check-Act. Лучше начать с небольшого количества SLO, определить достижимые цели, научиться отслеживать показатели и проводить улучшения постепенно.
## Interviews
Use the STAR method (Situation, Task, Action, Result).

Be ready to answer:
- Tell me about a time you automated something.
- Describe a system failure you encountered and how you handled it.
- How do you handle high-pressure situations?
- Have you ever disagreed with a developer over reliability?
