# bpftrace
Сравнение bpftrace с другими инструментами
мониторинга
- perf(1): в сравнении с компактным и высокоуровневым языком bpftrace язык
сценариев perf(1) выглядит слишком многословным. perf(1) поддерживает
эффективный способ передачи событий в двоичном формате через perf record
и режимы формирования сводной информации в памяти — perf top. bpftrace
реализует эффективные методы обобщения информации в ядре, например по-
строение гистограмм, тогда как встроенные в ядро сводки perf(1) ограничены
счетчиками (perf stat). Возможности perf(1) расширяются с помощью программ
BPF, но пишутся на другом языке, не таком высокоуровневом, как bpftrace. При-
мер программы BPF для perf(1) ищите в приложении D.
 - Ftrace: bpftrace предлагает высокоуровневый язык программирования, похожий
на C и awk, тогда как средства инструментации в Ftrace, включая триггеры hist,
имеют свой, ни на что не похожий синтаксис. Ftrace имеет меньше зависимостей,
поэтому он лучше подходит для использования в небольших встраиваемых си-
стемах Linux. Также Ftrace поддерживает такие режимы инструментации, как
подсчет вызовов функций, которые действуют более оптимально, чем источни-
ки событий в bpftrace. (Моя версия funccount(8) на основе Ftrace запускается
и останавливается быстрее и имеет меньший оверхед, чем эквивалентная версия
на основе bpftrace.)
- SystemTap: оба трассировщика, bpftrace и SystemTap, предлагают высокоуровне-
вые языки программирования. Но bpftrace основан на технологиях, встроенных
в ядро Linux, а SystemTap добавляет свои модули ядра, которые оказались не-
надежными в системах, отличных от RHEL. Но в SystemTap уже идут работы
по реализации поддержки BPF по аналогии с bpftrace, что должно повысить
надежность трассировщика в этих других системах. Сейчас у SystemTap больше
вспомогательных функций в своих библиотеках для инструментации различных
событий.
 - LTTng: LTTng оптимизирует вывод дампов событий и предоставляет инструмен-
ты для их анализа. Он использует иной подход к анализу производительности,
чем bpftrace, ориентированный на выполнение анализа в масштабе реального
времени.
 - Прикладные инструменты: область применения прикладных инструментов
и инструментов среды выполнения ограничены пространством пользователя.
bpftrace, напротив, способен также инструментировать и обрабатывать события
в пространстве ядра, позволяя идентифицировать источники проблем, недоступ-
ные прикладным инструментам. Однако прикладные инструменты имеют свои
преимущества — обычно они адаптированы для использования с конкретным
приложением или средой выполнения. Профилировщик базы данных MySQL
уже знает, как инструментировать запросы, а профилировщик JVM — сборку
мусора. В bpftrace все это приходится реализовывать вручную.
